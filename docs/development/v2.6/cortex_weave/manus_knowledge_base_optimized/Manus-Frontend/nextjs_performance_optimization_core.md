name: Next.js Performance Optimization - Core
use_when: When implementing or optimizing Next.js applications for performance, SEO, and user experience.
content: |
  Core techniques for Next.js performance optimization:
  1.  **Rendering Strategy**: Select appropriate rendering (Server Components, Client Components, SSG, ISR, SSR) based on content dynamism and interactivity.
  2.  **Image Optimization**: Use `next/image` for responsive images, WebP/AVIF formats, lazy loading, and priority setting.
  3.  **Font Optimization**: Use `next/font` for automatic optimization, subsetting, variable fonts, and `font-display: swap`.
  4.  **JavaScript Optimization**: Implement code splitting (dynamic imports, `React.lazy`), tree shaking, and minimize third-party dependencies.
  5.  **Data Fetching Optimization**: Use React Server Components, React Query/SWR, proper caching, parallel fetching, and prefetching.
  6.  **Route Optimization**: Use App Router, route groups, parallel routes, intercepting routes, and `loading.js`/`error.js`.
  7.  **SEO Optimization**: Implement proper metadata (`next/metadata`), dynamic SEO, canonical URLs, and structured data.
  8.  **Caching Strategy**: Utilize Route Cache, Data Cache, Full Route Cache, Router Cache, and appropriate revalidation strategies.
  9.  **Edge Runtime Optimization**: Deploy to Edge runtime for reduced latency, use Edge API Routes, Middleware, and Edge Config.
  10. **Monitoring & Analytics**: Use Next.js Analytics, RUM, Lighthouse, custom metrics, and error tracking.
  Apply these techniques for optimal Next.js application performance, SEO, and user experience.

